# avangard_test_task
## _Тестовое задание на позицию Python-разработчика в «Авангард»._

# Описание

Подробное описание задания доступно по ссылке https://docs.google.com/document/d/15lv_Fztsbs3VBZgSrI4sGxd1HPkKqZIpLMm8XXIrPj0/edit

Сервис реализует запрос на стороннее API для получения текущей цены пары криптовалюты указанной пользователем к USD. Криптовалюту и пороговые значения для отслеживания пользователь передает через Telegram бот, через который получает уведомления о достижении порогового курса, по умолчанию проверка происходит раз в 5 минут.

## Используемые технологии 
- FastAPI
- aiogram
- SQLALchemy
- Celery
- httpx

# Запуск

Для запуска скопируйте репозиторий локально используя комманду 

``` sh 
git clone <ссылка на репозиторий>
```
После копирования репозитория в файле ``` config.py ``` замените ``` BOT_TOKEN ``` и ``` CM_API_KEY ``` на ваши актуальные значения API ключей для Telegagram бота и https://coinmarketcap.com/. При необходимости замените ``` CHECK_INTERVAL ``` (интервал проверки достижения порогового курса и отправи уведомлений) с 5 минут на необходимое вами количество времени. 

После настройки конфигурационного файла в зависимости от вашей операционной системы запустите один из раннеров 

Для UNIX 

``` sh
run.sh
```

Для Windows

``` sh
run.bat
```

__Примечание: для запуска необходимо наличие Docker и Docker-compose для вашей операционной системы__

После успешной сборки и запуска контейнеров API и Telegram бот будут запущены в фоновом режиме.

Для доступа к Swagger перейдите по адресу http://localhost:8000/docs здесь вы можете управлять парами криптовалют (добавлять, смотреть, изменять и удалять) 

Telegram бот будет доступ через Telegram по адресу, зависящему от указанного вами API ключа бота. 

При запуске бота он предложит ввести новые значения для пары для отслеживания, а также предоставлена возможность посмотреть пары, ранее добавленные пользотелем для отслеживания. 

При добавлении пар они сохраняются вместо с Telegram ID пользователя в базу данных SQLite, база хранится внутри Docker контейнера.

Запрос на API внешнего сервиса и логика последующей проверки достижения пороговых значений описаны в файле ```services.py```

